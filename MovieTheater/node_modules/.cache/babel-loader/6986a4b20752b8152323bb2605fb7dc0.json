{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/axiao/Alex/movie-sagas-weekend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/axiao/Alex/movie-sagas-weekend/src/index.js\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(rootSaga),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(logoutUser),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(fetchAllMovies),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(fetchSingleMovie),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(addNewMovie),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(deleteMovie);\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App.js';\nimport { createStore, combineReducers, applyMiddleware } from 'redux'; // Provider allows us to use redux within our react app\n\nimport { Provider } from 'react-redux';\nimport logger from 'redux-logger'; // Import saga middleware\n\nimport createSagaMiddleware from 'redux-saga';\nimport { takeEvery, put } from 'redux-saga/effects';\nimport axios from 'axios'; // Create the rootSaga generator function\n\nfunction rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context) {\n    while (1) switch (_context.prev = _context.next) {\n      case 0:\n        _context.next = 2;\n        return takeEvery('FETCH_MOVIES', fetchAllMovies);\n\n      case 2:\n        _context.next = 4;\n        return takeEvery('ADD_NEW_MOVIE', addNewMovie);\n\n      case 4:\n        _context.next = 6;\n        return takeEvery('FETCH_SINGLE_MOVIE', fetchSingleMovie);\n\n      case 6:\n        _context.next = 8;\n        return takeEvery('DELETE_MOVIE', deleteMovie);\n\n      case 8:\n        _context.next = 10;\n        return takeEvery('LOGOUT_USER', logoutUser);\n\n      case 10:\n      case \"end\":\n        return _context.stop();\n    }\n  }, _marked);\n}\n\nfunction logoutUser() {\n  return _regeneratorRuntime.wrap(function logoutUser$(_context2) {\n    while (1) switch (_context2.prev = _context2.next) {\n      case 0:\n        _context2.prev = 0;\n        _context2.next = 3;\n        return axios.get('/logout');\n\n      case 3:\n        _context2.next = 5;\n        return put({\n          type: 'LOGOUT'\n        });\n\n      case 5:\n        _context2.next = 10;\n        break;\n\n      case 7:\n        _context2.prev = 7;\n        _context2.t0 = _context2[\"catch\"](0);\n        console.log('logout error');\n\n      case 10:\n      case \"end\":\n        return _context2.stop();\n    }\n  }, _marked2, null, [[0, 7]]);\n}\n\nfunction fetchAllMovies() {\n  var movies;\n  return _regeneratorRuntime.wrap(function fetchAllMovies$(_context3) {\n    while (1) switch (_context3.prev = _context3.next) {\n      case 0:\n        _context3.prev = 0;\n        _context3.next = 3;\n        return axios.get('/api/movie');\n\n      case 3:\n        movies = _context3.sent;\n        console.log('get all:', movies.data);\n        _context3.next = 7;\n        return put({\n          type: 'SET_MOVIES',\n          payload: movies.data\n        });\n\n      case 7:\n        _context3.next = 12;\n        break;\n\n      case 9:\n        _context3.prev = 9;\n        _context3.t0 = _context3[\"catch\"](0);\n        console.log('get all error');\n\n      case 12:\n      case \"end\":\n        return _context3.stop();\n    }\n  }, _marked3, null, [[0, 9]]);\n}\n\nfunction fetchSingleMovie(action) {\n  var singleMovie;\n  return _regeneratorRuntime.wrap(function fetchSingleMovie$(_context4) {\n    while (1) switch (_context4.prev = _context4.next) {\n      case 0:\n        _context4.prev = 0;\n        _context4.next = 3;\n        return axios.get(\"/api/movie/\".concat(action.payload));\n\n      case 3:\n        singleMovie = _context4.sent;\n        console.log('get single movie:', singleMovie.data);\n        _context4.next = 7;\n        return put({\n          type: 'SET_MOVIE_DETAILS',\n          payload: singleMovie.data[0]\n        });\n\n      case 7:\n        _context4.next = 12;\n        break;\n\n      case 9:\n        _context4.prev = 9;\n        _context4.t0 = _context4[\"catch\"](0);\n        console.log('get all error');\n\n      case 12:\n      case \"end\":\n        return _context4.stop();\n    }\n  }, _marked4, null, [[0, 9]]);\n} // end fetchSingleMovie\n\n\nfunction addNewMovie(action) {\n  return _regeneratorRuntime.wrap(function addNewMovie$(_context5) {\n    while (1) switch (_context5.prev = _context5.next) {\n      case 0:\n        console.log('action.payload', action.payload); // add a new movie to the DB\n\n        _context5.prev = 1;\n        _context5.next = 4;\n        return axios.post('/api/movie', action.payload);\n\n      case 4:\n        _context5.next = 6;\n        return put({\n          type: 'FETCH_MOVIES'\n        });\n\n      case 6:\n        _context5.next = 11;\n        break;\n\n      case 8:\n        _context5.prev = 8;\n        _context5.t0 = _context5[\"catch\"](1);\n        console.log('Error in Saga POST', _context5.t0);\n\n      case 11:\n      case \"end\":\n        return _context5.stop();\n    }\n  }, _marked5, null, [[1, 8]]);\n} // end addNewMovie\n\n\nfunction deleteMovie(action) {\n  return _regeneratorRuntime.wrap(function deleteMovie$(_context6) {\n    while (1) switch (_context6.prev = _context6.next) {\n      case 0:\n        _context6.prev = 0;\n        _context6.next = 3;\n        return axios.delete(\"api/movie/\".concat(action.payload));\n\n      case 3:\n        _context6.next = 5;\n        return put({\n          type: 'FETCH_MOVIES'\n        });\n\n      case 5:\n        _context6.next = 10;\n        break;\n\n      case 7:\n        _context6.prev = 7;\n        _context6.t0 = _context6[\"catch\"](0);\n        console.log('Error in Saga Delete', _context6.t0);\n\n      case 10:\n      case \"end\":\n        return _context6.stop();\n    }\n  }, _marked6, null, [[0, 7]]);\n} // Create sagaMiddleware\n\n\nconst sagaMiddleware = createSagaMiddleware(); // Used to store a single movie's details\n\nconst movieDetails = (state = {}, action) => {\n  switch (action.type) {\n    case 'SET_MOVIE_DETAILS':\n      return action.payload;\n\n    case 'CLEAR_DETAILS':\n      return {};\n\n    default:\n      return state;\n  }\n}; // Used to store user status\n\n\nconst user = (state = false, action) => {\n  switch (action.type) {\n    case 'LOGIN':\n      return true;\n\n    case 'LOGOUT':\n      return false;\n\n    default:\n      return state;\n  }\n}; // Used to store movies returned from the server\n\n\nconst movies = (state = [], action) => {\n  switch (action.type) {\n    case 'SET_MOVIES':\n      return action.payload;\n\n    default:\n      return state;\n  }\n}; // Used to store the movie genres\n\n\nconst genres = (state = [], action) => {\n  switch (action.type) {\n    case 'SET_GENRES':\n      return action.payload;\n\n    default:\n      return state;\n  }\n}; // Create one store that all components can use\n\n\nconst storeInstance = createStore(combineReducers({\n  user,\n  movies,\n  genres,\n  movieDetails\n}), // Add sagaMiddleware to our store\napplyMiddleware(sagaMiddleware, logger)); // Pass rootSaga into our sagaMiddleware\n\nsagaMiddleware.run(rootSaga);\nReactDOM.render( /*#__PURE__*/_jsxDEV(React.StrictMode, {\n  children: /*#__PURE__*/_jsxDEV(Provider, {\n    store: storeInstance,\n    children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 147,\n  columnNumber: 5\n}, this), document.getElementById('root'));","map":{"version":3,"sources":["/Users/axiao/Alex/movie-sagas-weekend/src/index.js"],"names":["rootSaga","logoutUser","fetchAllMovies","fetchSingleMovie","addNewMovie","deleteMovie","React","ReactDOM","App","createStore","combineReducers","applyMiddleware","Provider","logger","createSagaMiddleware","takeEvery","put","axios","get","type","console","log","movies","data","payload","action","singleMovie","post","delete","sagaMiddleware","movieDetails","state","user","genres","storeInstance","run","render","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App.js';\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\n// Provider allows us to use redux within our react app\nimport { Provider } from 'react-redux';\nimport logger from 'redux-logger';\n// Import saga middleware\nimport createSagaMiddleware from 'redux-saga';\nimport { takeEvery, put } from 'redux-saga/effects';\nimport axios from 'axios';\n\n// Create the rootSaga generator function\nfunction* rootSaga() {\n    yield takeEvery('FETCH_MOVIES', fetchAllMovies);\n    yield takeEvery('ADD_NEW_MOVIE', addNewMovie)\n    yield takeEvery('FETCH_SINGLE_MOVIE', fetchSingleMovie)\n    yield takeEvery('DELETE_MOVIE', deleteMovie)\n    yield takeEvery('LOGOUT_USER', logoutUser)\n}\n\nfunction* logoutUser() {\n    try {\n        yield axios.get('/logout');\n        yield put({ type: 'LOGOUT' });\n    } catch {\n        console.log('logout error');\n    }\n}\n\nfunction* fetchAllMovies() {\n    // get all movies from the DB\n    try {\n        const movies = yield axios.get('/api/movie');\n        console.log('get all:', movies.data);\n        yield put({ type: 'SET_MOVIES', payload: movies.data });\n\n    } catch {\n        console.log('get all error');\n    }\n        \n}\n\nfunction* fetchSingleMovie(action) {\n  // get one movie from the DB\n  try {\n      const singleMovie = yield axios.get(`/api/movie/${action.payload}`);\n      console.log('get single movie:', singleMovie.data);\n      yield put({ type: 'SET_MOVIE_DETAILS', payload: singleMovie.data[0] });\n\n  } catch {\n      console.log('get all error');\n  }\n      \n} // end fetchSingleMovie\n\nfunction* addNewMovie(action) {\n  console.log('action.payload', action.payload);\n  // add a new movie to the DB\n  try {\n    yield axios.post('/api/movie', action.payload);\n    yield put({ \n      type: 'FETCH_MOVIES'\n    })\n  }\n  catch (err) {\n    console.log('Error in Saga POST', err);\n  }\n} // end addNewMovie\n\nfunction* deleteMovie(action) {\n  try {\n    yield axios.delete(`api/movie/${action.payload}`)\n    yield put({ \n      type: 'FETCH_MOVIES'\n    })\n  }\n  catch (err) {\n    console.log('Error in Saga Delete', err);\n  }\n}\n\n// Create sagaMiddleware\nconst sagaMiddleware = createSagaMiddleware();\n\n// Used to store a single movie's details\nconst movieDetails = (state = {}, action) => {\n  switch (action.type) {\n    case 'SET_MOVIE_DETAILS':\n      return action.payload;\n    case 'CLEAR_DETAILS':\n      return {};\n    default:\n      return state;\n  }\n}\n\n// Used to store user status\nconst user = (state = false, action) => {\n    switch (action.type) {\n        case 'LOGIN':\n            return true;\n        case 'LOGOUT':\n            return false;\n        default:\n            return state;\n    }\n}\n\n// Used to store movies returned from the server\nconst movies = (state = [], action) => {\n    switch (action.type) {\n        case 'SET_MOVIES':\n            return action.payload;\n        default:\n            return state;\n    }\n}\n\n// Used to store the movie genres\nconst genres = (state = [], action) => {\n    switch (action.type) {\n        case 'SET_GENRES':\n            return action.payload;\n        default:\n            return state;\n    }\n}\n\n// Create one store that all components can use\nconst storeInstance = createStore(\n    combineReducers({\n        user,\n        movies,\n        genres,\n        movieDetails\n    }),\n    // Add sagaMiddleware to our store\n    applyMiddleware(sagaMiddleware, logger),\n);\n\n// Pass rootSaga into our sagaMiddleware\nsagaMiddleware.run(rootSaga);\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={storeInstance}>\n        <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"]},"metadata":{},"sourceType":"module"}