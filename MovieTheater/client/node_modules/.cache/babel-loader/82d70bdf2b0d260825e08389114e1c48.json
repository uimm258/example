{"ast":null,"code":"var _jsxFileName = \"/Users/maymayliu/antraReact/FRE-Training-080221/MovieTheater/client/src/components/Login/LoginForm.js\";\nimport React, { Component } from 'react';\nimport AuthApiService from '../../services/auth-api-service';\nimport Context from '../../Context';\nimport TokenService from '../../services/token-service';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LoginForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: ' ',\n      password: ' ',\n      error: null\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const {\n        username,\n        password\n      } = event.target;\n      AuthApiService.postLogin({\n        username: username.value,\n        password: password.value\n      }).then(res => {\n        username.value = ' ';\n        password.value = ' '; //this.context.processLogin(res.authToken)\n\n        TokenService.saveAuthToken(res.authToken);\n        this.props.onLoginSuccess();\n      }).catch(res => {\n        this.setState({\n          error: res.error\n        });\n      });\n    };\n  }\n\n  render() {\n    const {\n      error\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          role: \"alert\",\n          children: error && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"login-username\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            required: true,\n            type: \"text\",\n            placeholder: \"Username is required\",\n            name: \"username\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            required: true,\n            type: \"password\",\n            placeholder: \"Password is required\",\n            name: \"password\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nLoginForm.defaultProps = {\n  onLoginSuccess: () => {}\n};\nLoginForm.contextType = Context;\nexport default LoginForm;","map":{"version":3,"sources":["/Users/maymayliu/antraReact/FRE-Training-080221/MovieTheater/client/src/components/Login/LoginForm.js"],"names":["React","Component","AuthApiService","Context","TokenService","LoginForm","state","username","password","error","handleChange","event","name","value","target","setState","handleSubmit","preventDefault","postLogin","then","res","saveAuthToken","authToken","props","onLoginSuccess","catch","render","defaultProps","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport AuthApiService from '../../services/auth-api-service';\nimport Context from '../../Context';\nimport TokenService from '../../services/token-service';\n\nclass LoginForm extends Component {\n  static defaultProps = {\n    onLoginSuccess: () => {}\n  }\n\n  state = {\n    username: ' ',\n    password: ' ',\n    error: null\n  }\n\n  static contextType = Context\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n\n    const {username, password} = event.target\n\n    AuthApiService.postLogin({\n      username: username.value,\n      password: password.value\n    }).then(res => {\n      username.value = ' '\n      password.value = ' '\n      //this.context.processLogin(res.authToken)\n      TokenService.saveAuthToken(res.authToken)\n      this.props.onLoginSuccess()\n    }).catch(res => {\n      this.setState({ error: res.error })\n    }) \n\n  }\n  \n  render() {\n    const { error } = this.state\n    return(\n      <div>\n        <form onSubmit={this.handleSubmit}>\n\n          <div role='alert'>\n            {error && <p>{error}</p>}\n          </div>\n\n          <div>\n            <label htmlFor=\"login-username\">Username</label>\n            <input required type=\"text\" placeholder=\"Username is required\" name=\"username\" onChange={this.handleChange} />\n          </div>\n\n          <div>\n            <label>Password</label>\n            <input required type=\"password\" placeholder=\"Password is required\" name=\"password\" onChange={this.handleChange}/>\n          </div>\n\n          <div>\n            <button type=\"submit\">Login</button>\n          </div>\n\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}