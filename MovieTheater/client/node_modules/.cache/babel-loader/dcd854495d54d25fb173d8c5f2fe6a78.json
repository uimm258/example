{"ast":null,"code":"var _jsxFileName = \"/Users/maymayliu/antraReact/FRE-Training-080221/MovieTheater/client/src/components/MovieListMain/MovieListMain.js\";\nimport React, { Component } from 'react';\nimport Movie from '../Movie/Movie';\nimport Context from '../../Context';\nimport { getMoviesForGenres } from '../../helpers';\nimport './MovieListMain.css';\nimport CircleButton from '../CircleButton/CircleButton';\nimport { Link } from 'react-router-dom';\nimport TokenService from '../../services/token-service';\nimport config from '../../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MovieListMain extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleDeleteGenre = () => {\n      const genreId = Object.values(this.props.match.params);\n      fetch(`${config.API_ENDPOINT}/admin/genre/${genreId}`, {\n        method: \"DELETE\",\n        headers: {\n          'content-type': 'application/json',\n          'authorization': `bearer ${TokenService.getAuthToken()}`\n        }\n      }).then(res => {\n        if (!res.ok) return res.json().then(e => Promise.reject(e));\n      }).then(() => {\n        this.context.deleteGenre(genreId);\n        window.location.href = '/';\n      }).catch(e => console.log(e));\n    };\n  }\n\n  render() {\n    const {\n      genre_id\n    } = this.props.match.params;\n    const {\n      movies = []\n    } = this.context;\n    const MoviesForGenre = getMoviesForGenres(movies, parseInt(genre_id));\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"MovieListMain\",\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        children: MoviesForGenre.map(movie => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Movie, {\n            id: movie.id,\n            price: movie.movies_price,\n            type: movie.movies_type\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 29\n          }, this)\n        }, movie.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: TokenService.hasAuthToken() && /*#__PURE__*/_jsxDEV(CircleButton, {\n          tag: Link,\n          to: \"/add-movie\",\n          type: \"button\",\n          className: \"add-movie-button\",\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), \"Add Movie\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 53\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), TokenService.hasAuthToken() && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleDeleteGenre,\n        children: \"Delete the Current Genre\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 49\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nMovieListMain.defaultProps = {\n  match: {\n    params: {}\n  }\n};\nMovieListMain.contextType = Context;\n;\nexport default MovieListMain;","map":{"version":3,"sources":["/Users/maymayliu/antraReact/FRE-Training-080221/MovieTheater/client/src/components/MovieListMain/MovieListMain.js"],"names":["React","Component","Movie","Context","getMoviesForGenres","CircleButton","Link","TokenService","config","MovieListMain","handleDeleteGenre","genreId","Object","values","props","match","params","fetch","API_ENDPOINT","method","headers","getAuthToken","then","res","ok","json","e","Promise","reject","context","deleteGenre","window","location","href","catch","console","log","render","genre_id","movies","MoviesForGenre","parseInt","map","movie","id","movies_price","movies_type","hasAuthToken","defaultProps","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Movie from '../Movie/Movie';\nimport Context from '../../Context';\nimport { getMoviesForGenres } from '../../helpers';\nimport './MovieListMain.css';\nimport CircleButton from '../CircleButton/CircleButton';\nimport { Link } from 'react-router-dom';\nimport TokenService from '../../services/token-service';\nimport config from '../../config';\n\nclass MovieListMain extends Component {\n    static defaultProps = {\n        match: {\n            params: {}\n        }\n    };\n\n    static contextType = Context;\n\n    handleDeleteGenre = () => {\n        const genreId = Object.values(this.props.match.params);\n        fetch(`${config.API_ENDPOINT}/admin/genre/${genreId}`, {\n            method: \"DELETE\",\n            headers: {\n                'content-type': 'application/json',\n                'authorization': `bearer ${TokenService.getAuthToken()}`\n            }\n        })\n            .then((res) => {\n                if (!res.ok) return res.json().then((e) => Promise.reject(e))\n            })\n            .then(() => {\n                this.context.deleteGenre(genreId)\n                window.location.href = '/'\n            })\n            .catch((e) => console.log(e))\n    };\n\n    render() {\n        const { genre_id } = this.props.match.params;\n        const { movies = [] } = this.context;\n        const MoviesForGenre = getMoviesForGenres(movies, parseInt(genre_id));\n\n        return (\n            <section className='MovieListMain'>\n                <ul>\n                    {MoviesForGenre.map(movie =>\n                        <li key={movie.id}>\n                            <Movie\n                                id={movie.id}\n                                price={movie.movies_price}\n                                type={movie.movies_type}\n                            />\n                        </li>\n                    )}\n                </ul>\n\n                <div>\n                    {TokenService.hasAuthToken() && <CircleButton\n                        tag={Link}\n                        to='/add-movie'\n                        type='button'\n                        className=\"add-movie-button\">\n                        <br/>\n                        Add Movie\n                    </CircleButton>}\n                </div>\n\n                {TokenService.hasAuthToken() && <button onClick={this.handleDeleteGenre}>Delete the Current Genre</button>}\n            </section>\n        )\n    };\n};\n\nexport default MovieListMain;\n"]},"metadata":{},"sourceType":"module"}