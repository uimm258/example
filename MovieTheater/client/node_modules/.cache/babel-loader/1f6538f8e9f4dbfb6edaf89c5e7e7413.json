{"ast":null,"code":"var _jsxFileName = \"/Users/maymayliu/antraReact/FRE-Training-080221/MovieTheater/client/src/components/AddGenre/AddGenre.js\";\nimport React, { Component } from \"react\";\nimport Context from \"../../Context\";\nimport config from \"../../config\";\nimport TokenService from \"../../services/token-service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AddGenre extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmitGenre = event => {\n      event.preventDefault();\n      const genreName = this.state.genreName.name;\n      fetch(`${config.API_ENDPOINT}/admin/Genre`, {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json',\n          'authorization': `bearer ${TokenService.getAuthToken()}`\n        },\n        body: JSON.stringify({\n          'genre_name': genreName\n        })\n      }).then(res => res.json()).then(data => {\n        this.context.addGenre(data);\n        this.props.history.push('/');\n      }).catch(error => console.log(error));\n    };\n\n    this.state = {\n      genreName: {\n        name: ' ',\n        touched: false\n      },\n      admin_id: {\n        adminId: 1,\n        touched: false\n      }\n    };\n  }\n\n  updateGenreName(genreName) {\n    this.setState({\n      GenreName: {\n        name: genreName,\n        touched: true\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add New Genre\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => this.handleSubmitGenre(e),\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: this.state.genreName.touched\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"test\",\n          name: \"genre-name\",\n          onChange: e => this.updateGenreName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"\\u786E\\u8BA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nAddGenre.contextType = Context;\n;\nexport default AddGenre;","map":{"version":3,"sources":["/Users/maymayliu/antraReact/FRE-Training-080221/MovieTheater/client/src/components/AddGenre/AddGenre.js"],"names":["React","Component","Context","config","TokenService","AddGenre","constructor","props","handleSubmitGenre","event","preventDefault","genreName","state","name","fetch","API_ENDPOINT","method","headers","getAuthToken","body","JSON","stringify","then","res","json","data","context","addGenre","history","push","catch","error","console","log","touched","admin_id","adminId","updateGenreName","setState","GenreName","render","e","target","value","contextType"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;;;AAEA,MAAMC,QAAN,SAAuBJ,SAAvB,CAAiC;AAG7BK,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;;AADc,SAuBlBC,iBAvBkB,GAuBGC,KAAD,IAAW;AAC3BA,MAAAA,KAAK,CAACC,cAAN;AACA,YAAMC,SAAS,GAAG,KAAKC,KAAL,CAAWD,SAAX,CAAqBE,IAAvC;AAEAC,MAAAA,KAAK,CAAE,GAAEX,MAAM,CAACY,YAAa,cAAxB,EAAuC;AACxCC,QAAAA,MAAM,EAAE,MADgC;AAExCC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,2BAAkB,UAASb,YAAY,CAACc,YAAb,EAA4B;AAFlD,SAF+B;AAMxCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAC,wBAAcV;AAAf,SAAf;AANkC,OAAvC,CAAL,CAQCW,IARD,CAQMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARb,EASCF,IATD,CASMG,IAAI,IAAI;AACV,aAAKC,OAAL,CAAaC,QAAb,CAAsBF,IAAtB;AACA,aAAKlB,KAAL,CAAWqB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH,OAZD,EAaCC,KAbD,CAaOC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAbhB;AAcH,KAzCiB;;AAEd,SAAKnB,KAAL,GAAW;AACPD,MAAAA,SAAS,EAAE;AACPE,QAAAA,IAAI,EAAE,GADC;AAEPqB,QAAAA,OAAO,EAAE;AAFF,OADJ;AAKPC,MAAAA,QAAQ,EAAE;AACNC,QAAAA,OAAO,EAAE,CADH;AAENF,QAAAA,OAAO,EAAE;AAFH;AALH,KAAX;AAUH;;AAEDG,EAAAA,eAAe,CAAC1B,SAAD,EAAW;AACtB,SAAK2B,QAAL,CAAc;AACVC,MAAAA,SAAS,EAAC;AACN1B,QAAAA,IAAI,EAAEF,SADA;AAENuB,QAAAA,OAAO,EAAE;AAFH;AADA,KAAd;AAMH;;AAsBDM,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAGI;AAAM,QAAA,QAAQ,EAAEC,CAAC,IAAG,KAAKjC,iBAAL,CAAuBiC,CAAvB,CAApB;AAAA,gCACI;AAAO,UAAA,OAAO,EAAC,MAAf;AAAA,oBAAuB,KAAK7B,KAAL,CAAWD,SAAX,CAAqBuB;AAA5C;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAO,UAAA,IAAI,EAAC,MAAZ;AAAmB,UAAA,IAAI,EAAC,YAAxB;AAAqC,UAAA,QAAQ,EAAEO,CAAC,IAAE,KAAKJ,eAAL,CAAqBI,CAAC,CAACC,MAAF,CAASC,KAA9B;AAAlD;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAII;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAaH;;AA5D4B;;AAA3BtC,Q,CACKuC,W,GAAc1C,O;AA4DxB;AAED,eAAeG,QAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Context from \"../../Context\";\nimport config from \"../../config\";\nimport TokenService from \"../../services/token-service\";\n\nclass AddGenre extends Component {\n    static contextType = Context;\n\n    constructor(props){\n        super(props)\n        this.state={\n            genreName: {\n                name: ' ',\n                touched: false\n            },\n            admin_id: {\n                adminId: 1,\n                touched: false\n            }\n        }\n    };\n\n    updateGenreName(genreName){\n        this.setState({\n            GenreName:{\n                name: genreName,\n                touched: true\n            },\n        })\n    };\n\n    handleSubmitGenre = (event) => {\n        event.preventDefault();\n        const genreName = this.state.genreName.name;\n        \n        fetch(`${config.API_ENDPOINT}/admin/Genre`, {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json',\n                'authorization': `bearer ${TokenService.getAuthToken()}`\n            },\n            body: JSON.stringify({'genre_name': genreName})\n        })\n        .then(res => res.json())\n        .then(data => {\n            this.context.addGenre(data)\n            this.props.history.push('/')\n        })\n        .catch(error => console.log(error))\n    };\n\n    render() {\n        return(\n            <div>\n                <h2>Add New Genre</h2>\n\n                <form onSubmit={e=> this.handleSubmitGenre(e)}>\n                    <label htmlFor=\"name\">{this.state.genreName.touched}</label>\n                    <input type=\"test\" name=\"genre-name\" onChange={e=>this.updateGenreName(e.target.value)}></input>\n\n                    <button type=\"submit\">чбошод</button>\n                </form>\n\n            </div>\n        )\n    };\n};\n\nexport default AddGenre;"]},"metadata":{},"sourceType":"module"}